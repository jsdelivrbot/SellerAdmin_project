webpackJsonp([58],{"/nYJ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("//Fk"),n=a.n(i),s=a("bOdI"),r=a.n(s),o=a("NYxO"),d=a("jvWE"),l=a("iTKD"),p={name:"",props:["id"],components:{Upload:a("TAej").a,Editor:l.a},data:function(){var t;return t={imageObj:{accept:"image/*"},radioIndex:"",updateImageURL:[],addRadioIndex:0,isUploaNode:!0,options:[],updateActivityContentObj:{},addActivityContentDialog:!1,updateActivityContentDialog:!1,activityContent:"",GoodId:"",LineID:"",userName:"",ImageURL:[],ImageURL2:[],isLoading:!1,userSearchID:"",formLabelWidth:"120px",addDialog:!1,updateAdminLinePrepareDialog:!1,updateAdminLinePrepareObj:{}},r()(t,"imageObj",{accept:"image/*"}),r()(t,"addRadioIndex",0),r()(t,"addActiveIndex",0),r()(t,"updateActiveIndex",0),r()(t,"addData",{ts_pt_Name:"",ts_pt_Product_LineID:"",ts_pt_Content:"",ts_pt_ShowImage:"",ts_pt_Day:"",ts_pt_Remark:""}),r()(t,"addOptions",{loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",token:"",data:{}}),t},computed:Object(o.b)(["adminTradeGoodList","adminProductLine","adminQueryProductList","adminLinePrepare"]),methods:{getData:function(t){this.addRadioIndex?(this.ImageURL.splice(this.radioIndex-1,1,t.data),this.addRadioIndex=""):this.ImageURL.push(t.data)},updateImage:function(t){this.radioIndex?(this.updateImageURL.splice(this.radioIndex-1,1,t.data),this.radioIndex=""):this.updateImageURL.push(t.data)},deleteUpdateImageURL:function(t){this.isNewUploaNode=!1,this.updateImageURL=this.updateImageURL.filter(function(e){return e!=t})},deleteImageURL:function(t){this.isUploaNode=!1,this.ImageURL=this.ImageURL.filter(function(e){return e!=t})},jump:function(t){var e=sessionStorage.getItem("MerchanID");e&&window.open("http://hly.1000da.com.cn/index.html#/Comment/agenciesDetail/"+e,"_blank")},closeDialog:function(){this.updateAdminLinePrepareDialog=!1,this.addDialog=!1},cacheForm:function(){this.addDialog=!1},selectInitData:function(t,e){var a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",ts_gi_GoodID:t,ts_gi_ParentID:e||""};return this.$store.dispatch("initSelectInitAllData",a)},handleSelect:function(t){this.userName=t.value;var e={loginUserID:"huileyou",loginUserPass:123,goodID:t.id?t.id:""};this.$store.dispatch("initAdminProductLine",e)},loadAll:function(t,e){var a=this;return new n.a(function(t,i){var n=JSON.parse(sessionStorage.getItem("admin")),s={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",tradeID:n.sm_ui_ID?n.sm_ui_ID:"",goodTitle:e||"",userID:"",pcName:"",ID:"",isDelete:0,page:1,rows:40};a.$store.dispatch("initAdminTradeGoodList",s).then(function(e){t(e)},function(t){a.$notify({message:t,type:"error"})})})},querySearchAsync:function(t,e){var a=this;this.loadAll(1,t).then(function(t){t=(t=t.data).map(function(t){return{id:t.ta_tg_ID,value:t.ta_tg_Title}}),a.restaurants=t,clearTimeout(a.timeout),a.timeout=setTimeout(function(){e(a.restaurants)},10)})},initData:function(t){var e=this,a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",goodID:t||""};this.isLoading=!0,this.$store.dispatch("initAdminLinePrepare",a).then(function(){e.isLoading=!1},function(t){e.$notify({message:t,type:"error"})})},search:function(){this.userSearchID?this.initData(this.userSearchID):this.$notify({message:"请选择筛选条件",type:"error"})},searchInitData:function(){this.id&&this.initData(this.id)},addAdminLinePrepare:function(){for(var t in this.addData)this.addData[t]="";var e=document.querySelectorAll(".w-e-text");if(e&&e.length)for(var a=0;a<e.length;a++)e[a].innerHTML="";this.addDialog=!0},addSubmit:function(){var t=this;this.ImageURL.length&&(this.addData.ts_pt_ShowImage=this.ImageURL.join(",")),isNaN(this.addData.ts_pt_Day)?this.$notify({message:"第几天行程请输入数字!",type:"error"}):(this.addData.ts_pt_Product_LineID=this.id,this.addOptions.data=this.addData,this.$store.dispatch("AddAdminLinePrepare",this.addOptions).then(function(e){t.$notify({message:e,type:"success"}),t.initData(t.id)},function(e){t.$notify({message:e,type:"error"})}),this.addDialog=!1)},updateAdminLinePrepare:function(t){this.updateAdminLinePrepareObj=t,this.updateAdminLinePrepareDialog=!0,this.updateImageURL=t.ts_pt_ShowImage},updateAdminLinePrepareSubmit:function(){var t=this;if(isNaN(this.updateAdminLinePrepareObj.ts_pt_Day))this.$notify({message:"第几天行程请输入数字!",type:"error"});else{var e={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",data:{ts_pt_ID:this.updateAdminLinePrepareObj.ts_pt_ID,ts_pt_Day:this.updateAdminLinePrepareObj.ts_pt_Day,ts_pt_Content:Object(d.a)(this.updateAdminLinePrepareObj.ts_pt_Content),ts_pt_Name:this.updateAdminLinePrepareObj.ts_pt_Name,ts_pt_Remark:this.updateAdminLinePrepareObj.ts_pt_Remark}};this.updateImageURL.length&&(e.data.ts_pt_ShowImage=this.updateImageURL.join(",")),this.$store.dispatch("UpdateAdminLinePrepare",e).then(function(){t.$notify({message:"修改成功!",type:"success"}),t.initData(t.updateAdminLinePrepareObj.ts_pt_Product_LineID)},function(e){t.$notify({message:e,type:"error"})}),this.updateAdminLinePrepareDialog=!1}},deleteAdminLinePrepare:function(t){var e=this,a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",data:{ts_pt_ID:t}};this.$store.dispatch("DeleteAdminLinePrepare",a).then(function(){e.$notify({message:"删除成功!",type:"success"}),e.initData(e.id)},function(t){e.$notify({message:t,type:"error"})})},scheduleTimeManagement:function(t){this.$store.commit("adminScheduleTimeManagementId",t),this.$router.push({name:"AdminScheduleTime"}),sessionStorage.setItem("index","3")}},created:function(){"预订须知"!==sessionStorage.getItem("AdminQueryProductInformationListName")&&sessionStorage.setItem("AdminQueryProductInformationListName","线路日程");for(var t=1;t<21;t++)this.options.push({value:t});this.initData(this.id)},mounted:function(){this.searchInitData()}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{attrs:{id:"wrap"}},[a("h1",{staticClass:"userClass"},[t._v("线路日程信息")]),t._v(" "),a("el-col",{staticClass:"formSearch",attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{staticStyle:{"padding-right":"20px",float:"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addAdminLinePrepare}},[t._v("新增")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.adminLinePrepare,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"主键编号:"}},[a("span",[t._v(t._s(e.row.ts_pt_ID))])]),t._v(" "),a("el-form-item",{attrs:{label:"线路编号:"}},[a("span",[t._v(t._s(e.row.ts_pt_Product_LineID))])]),t._v(" "),a("el-form-item",{attrs:{label:"日程名称:"}},[a("span",[t._v(t._s(e.row.ts_pt_Name))])]),t._v(" "),a("el-form-item",{attrs:{label:"第几天日程:"}},[a("span",[t._v(t._s(e.row.ts_pt_Day))])]),t._v(" "),a("el-form-item",{attrs:{label:"活动图片地址:"}},t._l(e.row.ts_pt_ShowImage,function(t,e){return a("img",{key:e,attrs:{src:t,alt:"",width:"300",height:"150"}})})),t._v(" "),a("el-form-item",{attrs:{label:"线路日程详情:"}},[a("div",{domProps:{innerHTML:t._s(e.row.ts_pt_Content)}})])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"主键编号",prop:"ts_pt_ID",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"线路编号",align:"center",prop:"ts_pt_Product_LineID"}}),t._v(" "),a("el-table-column",{attrs:{label:"日程名称",align:"center",prop:"ts_pt_Name"}}),t._v(" "),a("el-table-column",{attrs:{label:"第几天日程",align:"center",prop:"ts_pt_Day"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{ref:"popover1",attrs:{placement:"top-start",trigger:"hover",content:e.row.ts_pt_Remark}}),t._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],attrs:{size:"small"}},[t._v("移入查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.updateAdminLinePrepare(e.row)}}},[t._v("修改\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteAdminLinePrepare(e.row.ts_pt_ID)}}},[t._v("删除\n          ")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){t.jump(e.row)}}},[t._v("预览效果\n          ")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加线路日程",visible:t.addDialog,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(e){t.addDialog=e},close:t.closeDialog}},[a("el-form",{attrs:{model:t.addData}},[a("el-form-item",{attrs:{label:"日程名称:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入日程名称"},model:{value:t.addData.ts_pt_Name,callback:function(e){t.$set(t.addData,"ts_pt_Name",e)},expression:"addData.ts_pt_Name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"第几天行程:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入第几天行程"},model:{value:t.addData.ts_pt_Day,callback:function(e){t.$set(t.addData,"ts_pt_Day",e)},expression:"addData.ts_pt_Day"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"线路日程详情:","label-width":t.formLabelWidth}},[a("editor",{model:{value:t.addData.ts_pt_Content,callback:function(e){t.$set(t.addData,"ts_pt_Content",e)},expression:"addData.ts_pt_Content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动图片:","label-width":t.formLabelWidth,required:""}},[a("p",[t._v("单张图片大小不能大于600KB")]),t._v(" "),a("Upload",{attrs:{attrs:t.imageObj},on:{getData:t.getData}}),t._v(" "),a("div",{staticClass:"imgWap"},t._l(t.ImageURL,function(e,i){return a("p",{staticStyle:{display:"inline-block",position:"relative","margin-right":"70px"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.ImageURL.length,expression:"ImageURL.length"}],attrs:{src:e,width:"280",height:"125"}}),t._v(" "),a("span",{staticStyle:{color:"#f60"},on:{click:function(a){t.deleteImageURL(e)}}},[t._v("X")]),t._v(" "),a("em",[a("el-radio",{attrs:{label:i+1},model:{value:t.addRadioIndex,callback:function(e){t.addRadioIndex=e},expression:"addRadioIndex"}},[t._v("替换")])],1)])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"备注:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"textarea",autosize:{minRows:6,maxRows:10}},model:{value:t.addData.ts_pt_Remark,callback:function(e){t.$set(t.addData,"ts_pt_Remark",e)},expression:"addData.ts_pt_Remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改线路日程",visible:t.updateAdminLinePrepareDialog,"close-on-click-modal":!1,width:"1150px"},on:{"update:visible":function(e){t.updateAdminLinePrepareDialog=e},close:t.closeDialog}},[a("el-form",{attrs:{model:t.updateAdminLinePrepareObj}},[a("el-form-item",{attrs:{label:"日程名称:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入日程名称"},model:{value:t.updateAdminLinePrepareObj.ts_pt_Name,callback:function(e){t.$set(t.updateAdminLinePrepareObj,"ts_pt_Name",e)},expression:"updateAdminLinePrepareObj.ts_pt_Name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"第几天行程:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入第几天行程"},model:{value:t.updateAdminLinePrepareObj.ts_pt_Day,callback:function(e){t.$set(t.updateAdminLinePrepareObj,"ts_pt_Day",e)},expression:"updateAdminLinePrepareObj.ts_pt_Day"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"线路日程详情:","label-width":t.formLabelWidth}},[a("editor",{model:{value:t.updateAdminLinePrepareObj.ts_pt_Content,callback:function(e){t.$set(t.updateAdminLinePrepareObj,"ts_pt_Content",e)},expression:"updateAdminLinePrepareObj.ts_pt_Content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"展示图片:","label-width":t.formLabelWidth}},[a("p",[t._v("单张图片大小不能大于600KB")]),t._v(" "),a("Upload",{attrs:{attrs:t.imageObj},on:{getData:t.updateImage}}),t._v(" "),a("div",{staticClass:"imgWap"},t._l(t.updateImageURL,function(e,i){return a("p",{staticStyle:{display:"inline-block",position:"relative","margin-right":"70px"}},[a("span",{staticStyle:{color:"#f60"},on:{click:function(a){t.deleteUpdateImageURL(e)}}},[t._v("X")]),t._v(" "),a("em",[a("el-radio",{attrs:{label:i+1},model:{value:t.radioIndex,callback:function(e){t.radioIndex=e},expression:"radioIndex"}},[t._v("替换")])],1),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.updateImageURL.length,expression:"updateImageURL.length"}],attrs:{src:e,width:"280",height:"125"}})])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"备注:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"textarea",autosize:{minRows:6,maxRows:10}},model:{value:t.updateAdminLinePrepareObj.ts_pt_Remark,callback:function(e){t.$set(t.updateAdminLinePrepareObj,"ts_pt_Remark",e)},expression:"updateAdminLinePrepareObj.ts_pt_Remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.updateAdminLinePrepareDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateAdminLinePrepareSubmit}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(p,m,!1,function(t){a("aYs3")},"data-v-723bf653",null);e.default=u.exports},aYs3:function(t,e,a){var i=a("qJrN");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("49a6b9ae",i,!0)},qJrN:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.imgWap span[data-v-723bf653] {\n  position: absolute;\n  right: -15px;\n  top: -6px;\n}\n.imgWap em[data-v-723bf653] {\n  position: absolute;\n  right: -55px;\n  top: 30px;\n  font-style: normal;\n  color: #42b983;\n}\n",""])}});