webpackJsonp([62],{"/oKx":function(e,t,i){var a=i("PlJ9");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("4ad44278",a,!0)},DI3W:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Xxa5"),n=i.n(a),r=i("exGp"),s=i.n(r),o=i("//Fk"),l=i.n(o),d=i("SJI6"),c={name:"",props:["id"],data:function(){return{cityName:"",GoodId:"",LineID:"",userName:"",departureCityID:"",isLoading:!1,userSearchID:"",formLabelWidth:"120px",createTimeData:"",addAdminLinePriceDialog:!1,updateAdminLinePriceDialog:!1,multipleSelection:[],provice:"",addOptions:{loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",productLineID:"",manNo:"",childNo:"",city:"",fullPrice:"",childPrice:"",createFrom:"",createTo:""}}},computed:Object(d.mapGetters)(["adminTradeGoodList","adminProductLine","adminQueryProductList","departureCityList","adminLinePriceList","adminRouteDepartureCity","proviceList","cityList","updateAdminLinePriceObj"]),created:function(){var e=this;"预订须知"!==sessionStorage.getItem("AdminQueryProductInformationListName")&&sessionStorage.setItem("AdminQueryProductInformationListName","产品线路价格");if(this.adminLineScheduleManagementId=this.id,this.$store.dispatch("initProvice",{areaPid:3337}),this.adminLineScheduleManagementId){var t={loginUserID:"huileyou",loginUserPass:"123",lineID:this.adminLineScheduleManagementId};this.$store.dispatch("initDepartureCity",t).then(function(){e.initData(e.id)})}},methods:{cacheForm:function(){this.addAdminLinePriceDialog=!1,window.location.reload()},handleCitySelect:function(e){this.addOptions.city=e.id,this.updateAdminLinePriceObj.ts_pp_FromPlace=e.id},jump:function(e){var t=sessionStorage.getItem("MerchanID");t&&window.open("http://hly.1000da.com.cn/index.html#/Comment/agenciesDetail/"+t,"_blank")},deleteAdminLinePrice:function(e){var t=this,i={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",ppID:e};this.$store.dispatch("DeleteAdminLinePrice",i).then(function(){t.initData(t.adminLineScheduleManagementId)})},handleSelect:function(e){this.userName=e.value;var t={loginUserID:"huileyou",loginUserPass:123,goodID:e.id?e.id:""};this.$store.dispatch("initAdminProductLine",t)},loadAll:function(e,t){var i=this;return new l.a(function(e,a){var n=JSON.parse(sessionStorage.getItem("admin")),r={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",tradeID:n.sm_ui_ID?n.sm_ui_ID:"",goodTitle:t||"",userID:"",pcName:"",ID:"",isDelete:0,page:1,rows:100};i.$store.dispatch("initAdminTradeGoodList",r).then(function(t){e(t)},function(e){i.$notify({message:e,type:"error"})})})},querySearchAsync:function(e,t){var i=this;this.loadAll(1,e).then(function(e){e=(e=e.data).map(function(e){return{id:e.ta_tg_ID,value:e.ta_tg_Title}}),i.restaurants=e,clearTimeout(i.timeout),i.timeout=setTimeout(function(){t(i.restaurants)},10)})},loadCityAll:function(e,t){var i=this;return new l.a(function(a,n){var r={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",page:e||1,rows:5,ts_cc_Name:t||"",lineID:i.id};i.$store.dispatch("initAdminRouteDepartureCity",r).then(function(e){a(e)},function(e){i.$notify({message:e,type:"error"})})})},querySearchCityAsync:function(e,t){var i=this;this.loadCityAll(1,e).then(function(e){e=(e=e.data).map(function(e){return{id:e.ts_cc_Code,value:e.ts_cc_Name}}),i.restaurants=e,clearTimeout(i.timeout),i.timeout=setTimeout(function(){t(i.restaurants)},10)})},addChangeLine:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",lineID:this.addOptions.productLineID,page:1,rows:5};this.$store.dispatch("initAdminRouteDepartureCity",t).then(function(t){e.total=t})},changeLine:function(){var e=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",lineID:this.userSearchID,page:1,rows:5};this.$store.dispatch("initAdminRouteDepartureCity",t).then(function(t){e.total=t})},changeProvice:function(){var e={areaPid:this.provice};this.$store.dispatch("initCityList",e)},handleSelectionChange:function(e){this.multipleSelection=e},searchBuildSeat:function(){var e=this;return s()(n.a.mark(function t(){var i,a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",productPriceID:""},a=0;case 2:if(!(a<e.multipleSelection.length)){t.next=9;break}return i.productPriceID=e.multipleSelection[a].ts_pp_ID,t.next=6,e.$store.dispatch("initBuildSeat",i);case 6:a++,t.next=2;break;case 9:case"end":return t.stop()}},t,e)}))()},buildSeat:function(){var e=this;this.multipleSelection.length?(this.isLoading=!0,this.searchBuildSeat().then(function(){e.isLoading=!1,e.$notify({message:"生成成功",type:"success"})})):this.$notify({message:"请先选择,再生成座位!",type:"error"})},initData:function(e){var t=this,i={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",lineID:e||this.userSearchID,city:this.departureCityID?this.departureCityID:""};this.isLoading=!0,this.$store.dispatch("initAdminLinePrice",i).then(function(){t.isLoading=!1})},search:function(){this.initData(this.adminLineScheduleManagementId)},addAdminLinePrice:function(){for(var e in this.addOptions)"loginUserID"!=e&&"loginUserPass"!=e&&(this.addOptions[e]="");this.cityName="";var t=document.querySelectorAll(".w-e-text");if(t&&t.length)for(var i=0;i<t.length;i++)t[i].innerHTML="";this.$store.commit("setTranstionFalse"),this.addAdminLinePriceDialog=!0},addAdminLinePriceSubmit:function(){var e=this;this.cityName?(this.addOptions.createFrom=this.createTimeData[0],this.addOptions.createTo=this.createTimeData[1],this.addOptions.productLineID=this.adminLineScheduleManagementId,this.$store.dispatch("AddAdminLinePriceSubmit",this.addOptions).then(function(){e.$notify({message:"添加成功!",type:"success"}),e.initData(e.addOptions.productLineID)},function(t){e.$notify({message:t,type:"error"})}),this.addAdminLinePriceDialog=!1):this.$notify({message:"请选择出发城市!",type:"error"})},updateAdminLinePrice:function(e){this.$store.commit("setTranstionFalse"),this.$store.commit("initUpdateAdminLinePriceObj",e),this.updateAdminLinePriceDialog=!0},updateAdminLinePriceSubmit:function(){}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("section",{attrs:{id:"wrap"}},[i("h1",{staticClass:"userClass"},[e._v("产品线路价格信息")]),e._v(" "),i("el-col",{staticClass:"formSearch",attrs:{span:24}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{staticStyle:{float:"right","padding-right":"30px"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addAdminLinePrice}},[e._v("新增")])],1)],1)],1),e._v(" "),i("span",{staticStyle:{"font-size":"12px",margin:"40px 0 0 30px",color:"#f60",display:"block"}},[e._v("点击全选生成座位")]),e._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.adminLinePriceList.length,expression:"adminLinePriceList.length"}],staticClass:"formSearch",attrs:{span:24}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.buildSeat}},[e._v("生成座位")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.adminLinePriceList},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"主键编号:"}},[i("span",[e._v(e._s(t.row.ts_pp_ID))])]),e._v(" "),i("el-form-item",{attrs:{label:"线路编号:"}},[i("span",[e._v(e._s(t.row.ts_pp_ProduceTourID))])]),e._v(" "),i("el-form-item",{attrs:{label:"产品编号:"}},[i("span",[e._v(e._s(t.row.ts_pp_TradeGoodID))])]),e._v(" "),i("el-form-item",{attrs:{label:"出发城市:"}},[i("span",[e._v(e._s(t.row.cityName))])]),e._v(" "),i("el-form-item",{attrs:{label:"出发日期:"}},[i("span",[e._v(e._s(t.row.ts_pp_Date))])]),e._v(" "),i("el-form-item",{attrs:{label:"线路名称:"}},[i("el-popover",{ref:"popover1",attrs:{placement:"top-start",trigger:"hover",content:t.row.ts_pp_LineName}}),e._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],attrs:{size:"small"}},[e._v("移入查看")])],1),e._v(" "),i("el-form-item",{attrs:{label:"儿童人数:"}},[i("span",[e._v(e._s(t.row.ts_pp_Child)+"人")])]),e._v(" "),i("el-form-item",{attrs:{label:"儿童价格:"}},[i("span",[e._v(e._s(t.row.ts_pp_ChildPrice)+"元")])]),e._v(" "),i("el-form-item",{attrs:{label:"成人人数:"}},[i("span",[e._v(e._s(t.row.ts_pp_Person)+"人")])]),e._v(" "),i("el-form-item",{attrs:{label:"成人价格:"}},[i("span",[e._v(e._s(t.row.ts_pp_Price)+"元")])])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"selection",label:"主键编号"}}),e._v(" "),i("el-table-column",{attrs:{label:"主键编号",prop:"ts_pp_ID",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"线路名称",align:"center",prop:"ts_pp_LineName"}}),e._v(" "),i("el-table-column",{attrs:{label:"出发城市",align:"center",prop:"cityName"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){e.deleteAdminLinePrice(t.row.ts_pp_ID)}}},[e._v("删除\n          ")]),e._v(" "),i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){e.jump(t.row)}}},[e._v("预览效果\n          ")])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:"添加产品线路价格",visible:e.addAdminLinePriceDialog,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(t){e.addAdminLinePriceDialog=t}}},[i("el-form",{attrs:{model:e.addOptions}},[i("el-form-item",{attrs:{label:"请筛选出发城市:","label-width":e.formLabelWidth,required:""}},[i("el-autocomplete",{staticStyle:{width:"250px"},attrs:{size:"small","fetch-suggestions":e.querySearchCityAsync,placeholder:"请输入城市"},on:{select:e.handleCitySelect},model:{value:e.cityName,callback:function(t){e.cityName=t},expression:"cityName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售成人票数:","label-width":e.formLabelWidth,required:""}},[i("el-input",{attrs:{placeholder:"请输入成人票数"},model:{value:e.addOptions.manNo,callback:function(t){e.$set(e.addOptions,"manNo",t)},expression:"addOptions.manNo"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售成人票价:","label-width":e.formLabelWidth,required:""}},[i("el-input",{attrs:{placeholder:"请输入成人票价"},model:{value:e.addOptions.fullPrice,callback:function(t){e.$set(e.addOptions,"fullPrice",t)},expression:"addOptions.fullPrice"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售儿童票数:","label-width":e.formLabelWidth,required:""}},[i("el-input",{attrs:{placeholder:"请输入儿童票数"},model:{value:e.addOptions.childNo,callback:function(t){e.$set(e.addOptions,"childNo",t)},expression:"addOptions.childNo"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售儿童票价:","label-width":e.formLabelWidth,required:""}},[i("el-input",{attrs:{placeholder:"请输入儿童票价"},model:{value:e.addOptions.childPrice,callback:function(t){e.$set(e.addOptions,"childPrice",t)},expression:"addOptions.childPrice"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售日期范围:","label-width":e.formLabelWidth,required:""}},[i("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.createTimeData,callback:function(t){e.createTimeData=t},expression:"createTimeData"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addAdminLinePriceDialog=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addAdminLinePriceSubmit}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"修改产品线路价格",visible:e.updateAdminLinePriceDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.updateAdminLinePriceDialog=t}}},[i("el-form",{attrs:{model:e.addOptions}},[i("el-form-item",{attrs:{label:"请选择产品线路:","label-width":e.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择产品线路"},on:{change:e.changeLine},model:{value:e.updateAdminLinePriceObj.ts_pp_ProduceTourID,callback:function(t){e.$set(e.updateAdminLinePriceObj,"ts_pp_ProduceTourID",t)},expression:"updateAdminLinePriceObj.ts_pp_ProduceTourID"}},e._l(e.adminProductLine,function(e){return i("el-option",{key:e.ts_pt_ID,attrs:{label:e.ts_pt_Name,value:e.ts_pt_ID}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"请筛选出发城市:","label-width":e.formLabelWidth}},[i("el-autocomplete",{staticStyle:{width:"250px"},attrs:{size:"small","fetch-suggestions":e.querySearchCityAsync,placeholder:"请输入城市"},on:{select:e.handleCitySelect},model:{value:e.cityName,callback:function(t){e.cityName=t},expression:"cityName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售成人票数:","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入成人票数"},model:{value:e.updateAdminLinePriceObj.ts_pp_Person,callback:function(t){e.$set(e.updateAdminLinePriceObj,"ts_pp_Person",t)},expression:"updateAdminLinePriceObj.ts_pp_Person"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售成人票价:","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入成人票价"},model:{value:e.updateAdminLinePriceObj.ts_pp_Price,callback:function(t){e.$set(e.updateAdminLinePriceObj,"ts_pp_Price",t)},expression:"updateAdminLinePriceObj.ts_pp_Price"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售儿童票数:","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入儿童票数"},model:{value:e.updateAdminLinePriceObj.ts_pp_Child,callback:function(t){e.$set(e.updateAdminLinePriceObj,"ts_pp_Child",t)},expression:"updateAdminLinePriceObj.ts_pp_Child"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售儿童票价:","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"请输入儿童票价"},model:{value:e.updateAdminLinePriceObj.ts_pp_ChildPrice,callback:function(t){e.$set(e.updateAdminLinePriceObj,"ts_pp_ChildPrice",t)},expression:"updateAdminLinePriceObj.ts_pp_ChildPrice"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"可销售日期:","label-width":e.formLabelWidth}},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.updateAdminLinePriceObj.ts_pp_Date,callback:function(t){e.$set(e.updateAdminLinePriceObj,"ts_pp_Date",t)},expression:"updateAdminLinePriceObj.ts_pp_Date"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"备注",type:"textarea",rows:3},model:{value:e.updateAdminLinePriceObj.ts_pp_Remark,callback:function(t){e.$set(e.updateAdminLinePriceObj,"ts_pp_Remark",t)},expression:"updateAdminLinePriceObj.ts_pp_Remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.updateAdminLinePriceDialog=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.updateAdminLinePriceSubmit}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var m=i("VU/8")(c,p,!1,function(e){i("/oKx")},"data-v-1c9814b2",null);t.default=m.exports},PlJ9:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.el-form-item__label[data-v-1c9814b2]{\n  width: 140px !important;\n}\n",""])}});