webpackJsonp([40],{"399q":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("SJI6"),s=(a("jvWE"),{name:"",components:{Upload:a("TAej").a},computed:Object(o.mapGetters)(["foodStoreRoomList","roomTypeList"]),data:function(){return{addOptions:{fd_sfr_StoreFrontID:"",fd_sfr_RegionID:"",fd_sfr_RoomName:"",fd_sfr_BookMoney:"",fd_sfr_RoomMoney:"",fd_sfr_VedioURL:"",fd_sfr_LowestCost:"",fd_sfr_TablesCount:"",fd_sfr_WashRoom:""},showTabel:!0,hoveToilet:[{value:0,label:"无"},{value:1,label:"有"}],dialogFormVisible:!1,formLabelWidth:"120px",storeId:"",total:0,updateObj:{},isLoading:!1,updateDialog:!1,videoShow:!1,isShow:!1,videoObj:{accept:"video/*"},imageObj:{accept:"image/*"},addImageUrl:[],addRadioIndex:0,isNewUploaNode:!0,updateRadioIndex:0,showUpdateTabel:!0}},created:function(){this.storeId=this.$route.params.id,this.userInfo=JSON.parse(sessionStorage.getItem("admin")),this.initData(),this.initRoomType()},methods:{initRoomType:function(){var t=this;this.$store.dispatch("initRoomType",{loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",token:"",fd_py_ParentID:"75"}).then(function(){},function(e){t.$notify({message:e,type:"error"})})},addVideo:function(t){this.addOptions.fd_sfr_VedioURL=t.data},updateVideo:function(t){this.updateObj.fd_sfr_VedioURL=t.data},handleCurrentChange:function(t){this.initData(t)},initData:function(t){var e=this,a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",token:"",fd_sfr_StoreFrontID:this.storeId?this.storeId:"",agentID:this.userInfo.sm_ui_ID,page:t||1,rows:"10"};this.isLoading=!0,this.$store.dispatch("initFoodStoreRoom",a).then(function(t){e.isLoading=!1,e.total=t},function(t){e.$notify({message:t,type:"error"})})},search:function(){this.initData(this.storeId)},add:function(){var t=document.querySelector(".uploader-list");for(var e in t&&(t.querySelector("ul").innerHTML=""),this.addImageUrl=[],this.addOptions)this.addOptions[e]="";this.addOptions.fd_sfr_StoreFrontID=this.storeId,this.dialogFormVisible=!0,this.$store.commit("setTranstionFalse")},changeRoomType:function(){78==this.addOptions.fd_sfr_RegionID?this.showTabel=!1:this.showTabel=!0},addSubmit:function(){var t=this;78==this.addOptions.fd_sfr_RegionID&&(this.addOptions.fd_sfr_TablesCount=1);var e={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"操作员编码",operateUserName:"操作员名称",pcName:"",images:this.addImageUrl,data:this.addOptions};this.$store.dispatch("addFoodStoreRoom",e).then(function(e){t.$notify({message:e,type:"success"}),t.initData()},function(e){t.$notify({message:e,type:"error"})}),this.dialogFormVisible=!1},update:function(t){this.updateObj=t,this.$store.commit("setTranstionFalse"),this.updateDialog=!0,this.updateChangeRoomType()},updateChangeRoomType:function(){78==this.updateObj.fd_sfr_RegionID?(this.showUpdateTabel=!1,this.updateObj.fd_sfr_TablesCount=1):this.showUpdateTabel=!0},updateSubmit:function(){var t=this,e={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",images:this.updateObj.imgData,data:this.updateObj};this.$store.dispatch("updateFoodStoreRoom",e).then(function(e){t.$notify({message:e,type:"success"}),t.initData()},function(e){t.$notify({message:e,type:"error"})}),this.updateDialog=!1},Delete:function(t){var e=this,a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"操作员编码",operateUserName:"操作员名称",pcName:"",data:{fd_sfr_ID:t||""}};this.$store.dispatch("deleteFoodStoreRoom",a).then(function(t){e.$notify({message:t,type:"success"}),e.initData(e.storeId)},function(t){e.$notify({message:t,type:"error"})})},getData:function(t){this.addRadioIndex?(this.addImageUrl.splice(this.addRadioIndex-1,1,t.data),this.updateRadioIndex=""):this.addImageUrl.push(t.data)},deleteImageURL:function(t){this.isNewUploaNode=!1,this.addImageUrl=this.addImageUrl.filter(function(e){return e!=t})},updateData:function(t){this.updateRadioIndex?(this.updateObj.imgData.splice(this.updateRadioIndex-1,1,t.data),this.addRadioIndex=""):this.updateObj.imgData.push(t.data)},deleteUpdateImageURL:function(t){this.isNewUploaNode=!1,this.updateObj.imgData=this.updateObj.imgData.filter(function(e){return e!=t})}}}),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfix",attrs:{id:"wrap"}},[a("div",{staticClass:"title clearfix",staticStyle:{padding:"20px"}},[a("h1",{staticStyle:{"font-size":"20px"}},[t._v("店面房间")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.add}},[t._v("添加")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.foodStoreRoomList}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"店面名称"}},[a("span",[t._v(t._s(e.row.fd_sf_ProductName))])]),t._v(" "),a("el-form-item",{attrs:{label:"房间名称"}},[a("span",[t._v(t._s(e.row.fd_sfr_RoomName))])]),t._v(" "),a("el-form-item",{attrs:{label:"房间桌数"}},[a("span",[t._v(t._s(e.row.fd_sfr_TablesCount)+"桌")])]),t._v(" "),a("el-form-item",{attrs:{label:"订金(元)"}},[a("span",[t._v(t._s(e.row.fd_sfr_BookMoney)+" 元")])]),t._v(" "),a("el-form-item",{attrs:{label:"房间费用(元)"}},[a("span",[t._v(t._s(e.row.fd_sfr_RoomMoney)+" 元")])]),t._v(" "),a("el-form-item",{attrs:{label:"最低消费(元)"}},[a("span",[t._v(t._s(e.row.fd_sfr_LowestCost)+" 元")])]),t._v(" "),a("el-form-item",{attrs:{label:"房间区域名称"}},[a("span",[t._v(t._s(e.row.fd_py_Name))])]),t._v(" "),a("el-form-item",{attrs:{label:"有无单独卫生间"}},[a("span",[t._v(t._s(t._f("washRoomState")(e.row.fd_sfr_WashRoom)))])]),t._v(" "),a("el-form-item",{attrs:{label:"房间图片"}},t._l(e.row.imgData,function(e,o){return a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}],staticStyle:{"margin-right":"10px"},attrs:{height:"50"},on:{click:t.$seeImage}})})),t._v(" "),a("el-form-item",{attrs:{label:"房间视频"}},[a("video",{directives:[{name:"show",rawName:"v-show",value:e.row.fd_sfr_VedioURL,expression:"props.row.fd_sfr_VedioURL"}],attrs:{src:e.row.fd_sfr_VedioURL,height:"240",controls:"controls"}})])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"店面名称",prop:"fd_sf_ProductName"}}),t._v(" "),a("el-table-column",{attrs:{label:"房间名称",prop:"fd_sfr_RoomName"}}),t._v(" "),a("el-table-column",{attrs:{label:"预定金额(元)",prop:"fd_sfr_BookMoney"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.update(e.row)}}},[t._v("修改\n        ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.Delete(e.row.fd_sfr_ID)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"right"}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}],attrs:{"page-size":10,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加店面房间",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.addOptions}},[a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"房间名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addOptions.fd_sfr_RoomName,callback:function(e){t.$set(t.addOptions,"fd_sfr_RoomName",e)},expression:"addOptions.fd_sfr_RoomName"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"订金(元)","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入数字"},model:{value:t.addOptions.fd_sfr_BookMoney,callback:function(e){t.$set(t.addOptions,"fd_sfr_BookMoney",e)},expression:"addOptions.fd_sfr_BookMoney"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"房间费用(元)","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入数字"},model:{value:t.addOptions.fd_sfr_RoomMoney,callback:function(e){t.$set(t.addOptions,"fd_sfr_RoomMoney",e)},expression:"addOptions.fd_sfr_RoomMoney"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"最低消费(元)","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入数字"},model:{value:t.addOptions.fd_sfr_LowestCost,callback:function(e){t.$set(t.addOptions,"fd_sfr_LowestCost",e)},expression:"addOptions.fd_sfr_LowestCost"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"区域名称","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeRoomType},model:{value:t.addOptions.fd_sfr_RegionID,callback:function(e){t.$set(t.addOptions,"fd_sfr_RegionID",e)},expression:"addOptions.fd_sfr_RegionID"}},t._l(t.roomTypeList,function(t){return a("el-option",{key:t.propertyID,attrs:{label:t.propertyName,value:t.propertyID}})}))],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showTabel,expression:"showTabel"}],staticStyle:{width:"55%"},attrs:{label:"房间桌数(桌)","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入数字"},model:{value:t.addOptions.fd_sfr_TablesCount,callback:function(e){t.$set(t.addOptions,"fd_sfr_TablesCount",e)},expression:"addOptions.fd_sfr_TablesCount"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"有无单独卫生间","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addOptions.fd_sfr_WashRoom,callback:function(e){t.$set(t.addOptions,"fd_sfr_WashRoom",e)},expression:"addOptions.fd_sfr_WashRoom"}},t._l(t.hoveToilet,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"房间图片","label-width":t.formLabelWidth}},[a("Upload",{attrs:{attrs:t.imageObj},on:{getData:t.getData}}),t._v(" "),a("div",{staticClass:"imgWap"},t._l(t.addImageUrl,function(e,o){return a("p",{staticStyle:{display:"inline-block",position:"relative","margin-right":"70px"}},[a("span",{staticStyle:{color:"#f60"},on:{click:function(a){t.deleteImageURL(e)}}},[t._v("X")]),t._v(" "),a("em",[a("el-radio",{attrs:{label:o+1},model:{value:t.addRadioIndex,callback:function(e){t.addRadioIndex=e},expression:"addRadioIndex"}},[t._v("替换")])],1),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.addImageUrl.length,expression:"addImageUrl.length"}],attrs:{src:e,width:"280",height:"125"}})])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"上传视频:","label-width":t.formLabelWidth}},[a("p",[t._v("视频大小不能大于600MB")]),t._v(" "),a("Upload",{attrs:{attrs:t.videoObj},on:{getData:t.addVideo}}),t._v(" "),a("video",{directives:[{name:"show",rawName:"v-show",value:this.addOptions.fd_sfr_VedioURL,expression:"this.addOptions.fd_sfr_VedioURL"}],staticStyle:{"margin-top":"20px"},attrs:{src:this.addOptions.fd_sfr_VedioURL,height:"240",controls:"controls"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改店面房间",visible:t.updateDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.updateDialog=e}}},[a("el-form",{attrs:{model:t.updateObj}},[a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"房间名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.updateObj.fd_sfr_RoomName,callback:function(e){t.$set(t.updateObj,"fd_sfr_RoomName",e)},expression:"updateObj.fd_sfr_RoomName"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"订金(元)","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.updateObj.fd_sfr_BookMoney,callback:function(e){t.$set(t.updateObj,"fd_sfr_BookMoney",e)},expression:"updateObj.fd_sfr_BookMoney"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"预定价格(元)","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.updateObj.fd_sfr_RoomMoney,callback:function(e){t.$set(t.updateObj,"fd_sfr_RoomMoney",e)},expression:"updateObj.fd_sfr_RoomMoney"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"最低消费(元)","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入数字"},model:{value:t.updateObj.fd_sfr_LowestCost,callback:function(e){t.$set(t.updateObj,"fd_sfr_LowestCost",e)},expression:"updateObj.fd_sfr_LowestCost"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"区域名称","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.updateChangeRoomType},model:{value:t.updateObj.fd_sfr_RegionID,callback:function(e){t.$set(t.updateObj,"fd_sfr_RegionID",e)},expression:"updateObj.fd_sfr_RegionID"}},t._l(t.roomTypeList,function(t){return a("el-option",{key:t.propertyID,attrs:{label:t.propertyName,value:t.propertyID}})}))],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showUpdateTabel,expression:"showUpdateTabel"}],staticStyle:{width:"55%"},attrs:{label:"房间桌数(桌)","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入数字"},model:{value:t.updateObj.fd_sfr_TablesCount,callback:function(e){t.$set(t.updateObj,"fd_sfr_TablesCount",e)},expression:"updateObj.fd_sfr_TablesCount"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"55%"},attrs:{label:"有无单独卫生间","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.updateObj.fd_sfr_WashRoom,callback:function(e){t.$set(t.updateObj,"fd_sfr_WashRoom",e)},expression:"updateObj.fd_sfr_WashRoom"}},t._l(t.hoveToilet,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"房间图片","label-width":t.formLabelWidth}},[a("Upload",{attrs:{attrs:t.imageObj},on:{getData:t.updateData}}),t._v(" "),a("div",{staticClass:"imgWap"},t._l(t.updateObj.imgData,function(e,o){return a("p",{staticStyle:{display:"inline-block",position:"relative","margin-right":"70px"}},[a("span",{staticStyle:{color:"#f60"},on:{click:function(a){t.deleteUpdateImageURL(e)}}},[t._v("X")]),t._v(" "),a("em",[a("el-radio",{attrs:{label:o+1},model:{value:t.updateRadioIndex,callback:function(e){t.updateRadioIndex=e},expression:"updateRadioIndex"}},[t._v("替换")])],1),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.updateObj.imgData.length,expression:"updateObj.imgData.length"}],attrs:{src:e,width:"280",height:"125"}})])}))],1),t._v(" "),a("el-form-item",{attrs:{label:"上传视频:","label-width":t.formLabelWidth}},[a("p",[t._v("视频大小不能大于600MB")]),t._v(" "),a("Upload",{attrs:{attrs:t.videoObj},on:{getData:t.updateVideo}}),t._v(" "),a("video",{directives:[{name:"show",rawName:"v-show",value:this.updateObj.fd_sfr_VedioURL,expression:"this.updateObj.fd_sfr_VedioURL"}],attrs:{src:this.updateObj.fd_sfr_VedioURL,controls:"",width:"100"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.updateDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(t){a("DhLy")},"data-v-2058db59",null);e.default=l.exports},Cl3q:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.imgWap span[data-v-2058db59] {\n  position: absolute;\n  right: -15px;\n  top: -6px;\n}\n.imgWap em[data-v-2058db59] {\n  position: absolute;\n  right: -55px;\n  top: 30px;\n  font-style: normal;\n  color: #42b983;\n}\n",""])},DhLy:function(t,e,a){var o=a("Cl3q");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("4f608d4e",o,!0)}});