webpackJsonp([25],{OvIQ:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("SJI6"),i={computed:Object(a.mapGetters)(["ticketAttractionsList","ticketTypeList","ticketTypeTicketPriceList"]),data:function(){return{searchTime:"",loginId:"",isLoading:!1,scenicNumber:"",ticketTypeNumber:"",total:0,addDialog:!1,formLabelWidth:"120px",addOptions:{tm_tt_ID:"",tm_tp_Limit:"",createFrom:"",createTo:""},deleteDialog:!1,deleteOptions:{tm_tt_ID:"",dateFrom:"",dateTo:""}}},methods:{jump:function(){var n=sessionStorage.getItem("code");window.open("http://hly.1000da.com.cn/index.html#/Comment/ticketsDetail/"+n,"_blank")},handleCurrentChange:function(n){this.initData(this.ticketTypeNumber,n)},initTicketAttraction:function(){var n={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",tm_ts_Code:"",tm_ts_Name:"",tm_ts_TradeInfoID:this.loginId.sm_ui_ID,tm_ts_IsDelete:0,tm_ts_IsPass:"",tm_ts_ShowTop:"",tm_ts_IsHot:"",tm_ts_ThemeTypeID:"",page:1,rows:1e3};this.$store.dispatch("initTicketAttractions",n)},initData:function(n,t){var e=this,a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",tm_tt_ID:n||"",dateFrom:this.searchTime?this.searchTime:"",page:t||1,rows:5};this.isLoading=!0,this.$store.dispatch("initTicketTypeTicketPrice",a).then(function(n){e.isLoading=!1,e.total=n},function(n){e.$notify({message:n,type:"error"})})},search:function(){this.initData(this.ticketTypeNumber)},Add:function(){for(var n in this.addOptions)this.addOptions[n]="";this.$store.commit("setTranstionFalse"),this.addDialog=!0},addSubmit:function(){var n=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",data:this.addOptions};t.data.tm_tt_ID=this.$route.params.id,this.$store.dispatch("addTicketTypeTicketPriceSubmit",t).then(function(t){n.$notify({message:t,type:"success"}),n.initData(n.addOptions.tm_tt_ID)},function(t){n.$notify({message:t,type:"error"})}),this.addDialog=!1},deleteBtn:function(){this.$store.commit("setTranstionFalse"),this.deleteDialog=!0},deleteSubmit:function(){var n=this,t={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",tm_tt_ID:this.deleteOptions.tm_tt_ID,dateFrom:this.deleteOptions.dateFrom,dateTo:this.deleteOptions.dateTo};this.$store.dispatch("deleteTicketTypeTicketPriceSubmit",t).then(function(t){n.$notify({message:t,type:"success"}),n.initData(n.ticketTypeNumber)},function(t){n.$notify({message:t,type:"error"})}),this.deleteDialog=!1}},created:function(){this.ticketTypeNumber=this.$route.params.id,this.loginId=JSON.parse(sessionStorage.getItem("admin")),this.initData(this.ticketTypeNumber)}},s={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("div",{staticClass:"clearfix",attrs:{id:"wrap"}},[e("h1",{staticClass:"userClass"},[n._v("票种_票价信息")]),n._v(" "),e("el-col",{staticClass:"formSearch",attrs:{span:24}},[e("el-form",{attrs:{inline:!0}},[e("el-form-item",[e("span",[n._v("日期筛选:")])]),n._v(" "),e("el-form-item",[e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择日期(默认为本月)","value-format":"yyyy-MM-dd"},model:{value:n.searchTime,callback:function(t){n.searchTime=t},expression:"searchTime"}})],1)]),n._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:n.search}},[n._v("查询")]),n._v(" "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:n.Add}},[n._v("新增")]),n._v(" "),e("el-button",{attrs:{type:"success",size:"mini"},on:{click:n.jump}},[n._v("预览效果\n          ")]),n._v(" "),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:n.deleteBtn}},[n._v("删除")])],1)],1)],1),n._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:n.ticketTypeTicketPriceList}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e("el-form-item",{attrs:{label:"票种票价编号"}},[e("span",[n._v(n._s(t.row.tm_tp_ID))])]),n._v(" "),e("el-form-item",{attrs:{label:"票种编号"}},[e("span",[n._v(n._s(t.row.tm_tt_ID))])]),n._v(" "),e("el-form-item",{attrs:{label:"票价"}},[e("span",[n._v(n._s(t.row.tm_tp_TicketPrice)+"元")])]),n._v(" "),e("el-form-item",{attrs:{label:"实际价格"}},[e("span",[n._v(n._s(t.row.tm_tp_RealPrice)+"元")])]),n._v(" "),e("el-form-item",{attrs:{label:"日期"}},[e("span",[n._v(n._s(t.row.tm_tp_Date))])]),n._v(" "),e("el-form-item",{attrs:{label:"限售张数"}},[e("span",[n._v(n._s(t.row.tm_tp_Limit)+"张")])])],1)]}}])}),n._v(" "),e("el-table-column",{attrs:{label:"实际价格(元)",prop:"tm_tp_RealPrice"}}),n._v(" "),e("el-table-column",{attrs:{label:"限售张数(张)",prop:"tm_tp_Limit"}}),n._v(" "),e("el-table-column",{attrs:{label:"日期",prop:"tm_tp_Date"}})],1),n._v(" "),e("div",{staticClass:"block",staticStyle:{float:"right"}},[e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:n.total,expression:"total"}],attrs:{"page-size":5,layout:"total, prev, pager, next",total:n.total},on:{"current-change":n.handleCurrentChange}})],1),n._v(" "),e("el-dialog",{attrs:{title:"添加票种票价",visible:n.addDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){n.addDialog=t}}},[e("el-form",{attrs:{model:n.addOptions}},[e("el-form-item",{attrs:{label:"限售张数:","label-width":n.formLabelWidth}},[e("el-input",{model:{value:n.addOptions.tm_tp_Limit,callback:function(t){n.$set(n.addOptions,"tm_tp_Limit",t)},expression:"addOptions.tm_tp_Limit"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"开始日期:","label-width":n.formLabelWidth}},[e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择开始生产日期","value-format":"yyyy-MM-dd"},model:{value:n.addOptions.createFrom,callback:function(t){n.$set(n.addOptions,"createFrom",t)},expression:"addOptions.createFrom"}})],1)]),n._v(" "),e("el-form-item",{attrs:{label:"结束日期:","label-width":n.formLabelWidth}},[e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择结束生成日期","value-format":"yyyy-MM-dd"},model:{value:n.addOptions.createTo,callback:function(t){n.$set(n.addOptions,"createTo",t)},expression:"addOptions.createTo"}})],1)])],1),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){n.addDialog=!1}}},[n._v("取 消")]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:n.addSubmit}},[n._v("确 定")])],1)],1),n._v(" "),e("el-dialog",{attrs:{title:"删除票种票价",visible:n.deleteDialog},on:{"update:visible":function(t){n.deleteDialog=t}}},[e("el-form",{attrs:{model:n.deleteOptions}},[e("el-form-item",{attrs:{label:"票种编号:","label-width":n.formLabelWidth}},[e("el-select",{attrs:{placeholder:"如果没有数据先查询"},model:{value:n.deleteOptions.tm_tt_ID,callback:function(t){n.$set(n.deleteOptions,"tm_tt_ID",t)},expression:"deleteOptions.tm_tt_ID"}},n._l(n.ticketTypeList,function(n){return e("el-option",{key:n.tm_tt_ID,attrs:{label:n.tm_tt_Name,value:n.tm_tt_ID}})}))],1),n._v(" "),e("el-form-item",{attrs:{label:"开始日期:","label-width":n.formLabelWidth}},[e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择删除开始日期","value-format":"yyyy-MM-dd"},model:{value:n.deleteOptions.dateFrom,callback:function(t){n.$set(n.deleteOptions,"dateFrom",t)},expression:"deleteOptions.dateFrom"}})],1)]),n._v(" "),e("el-form-item",{attrs:{label:"结束日期:","label-width":n.formLabelWidth}},[e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择删除结束日期","value-format":"yyyy-MM-dd"},model:{value:n.deleteOptions.dateTo,callback:function(t){n.$set(n.deleteOptions,"dateTo",t)},expression:"deleteOptions.dateTo"}})],1)])],1),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){n.deleteDialog=!1}}},[n._v("取 消")]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:n.deleteSubmit}},[n._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var o=e("XAIM")(i,s,!1,function(n){e("T8yw")},"data-v-4a1ebba2",null);t.default=o.exports},T8yw:function(n,t,e){var a=e("jJP4");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("6imX")("1bc04714",a,!0)},jJP4:function(n,t,e){(n.exports=e("bKW+")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});